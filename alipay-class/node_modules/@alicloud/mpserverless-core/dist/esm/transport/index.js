(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define(["require", "exports", "tslib", "../constant", "../codec"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var tslib_1 = require("tslib");
    var constant_1 = require("../constant");
    var codec_1 = require("../codec");
    var HTTPTransport = (function () {
        function HTTPTransport(endpoint) {
            this.endpoint = endpoint;
            this.protocol = constant_1.TransportProtocol.HTTP;
        }
        HTTPTransport.prototype.getEncoder = function (prefix) {
            return new codec_1.HTTPRequestEncoder(this.endpoint, prefix);
        };
        HTTPTransport.prototype.setAppId = function (appId) {
            this.appId = appId;
        };
        HTTPTransport.prototype.setAppSecret = function (privateKey) {
            this.appSecret = privateKey;
            return this;
        };
        HTTPTransport.prototype.setUA = function (ua) {
            this.ua = ua;
            return this;
        };
        HTTPTransport.prototype.setLogger = function (logger) {
            this.logger = logger;
        };
        HTTPTransport.prototype.setTimeout = function (timeout) {
            if (timeout === void 0) { timeout = '5s'; }
            if (typeof timeout === 'string') {
                if (timeout.indexOf('ms') >= 0) {
                    this.timeout = parseInt(timeout, 10);
                    return;
                }
                if (timeout.indexOf('s') >= 0) {
                    this.timeout = parseInt(timeout, 10) * 1000;
                    return;
                }
            }
            else if (typeof timeout === 'number') {
                this.timeout = timeout;
                return;
            }
            this.timeout = 5000;
        };
        Object.defineProperty(HTTPTransport.prototype, "timeoutOption", {
            get: function () {
                return this.timeout;
            },
            enumerable: true,
            configurable: true
        });
        HTTPTransport.prototype.setSpaceId = function (spaceId) {
            this.spaceId = spaceId;
        };
        HTTPTransport.prototype.request = function (encoder) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
                return tslib_1.__generator(this, function (_a) {
                    return [2, (new codec_1.HTTPResponseDecoder()).decode()];
                });
            });
        };
        return HTTPTransport;
    }());
    exports.HTTPTransport = HTTPTransport;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdHJhbnNwb3J0L2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztJQUFBLHdDQUF3RDtJQUV4RCxrQ0FJa0I7SUFFbEI7UUFVRSx1QkFDUyxRQUFnQjtZQUFoQixhQUFRLEdBQVIsUUFBUSxDQUFRO1lBVGxCLGFBQVEsR0FBc0IsNEJBQWlCLENBQUMsSUFBSSxDQUFDO1FBVXpELENBQUM7UUFNRyxrQ0FBVSxHQUFqQixVQUFrQixNQUFlO1lBRS9CLE9BQU8sSUFBSSwwQkFBa0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZELENBQUM7UUFPTSxnQ0FBUSxHQUFmLFVBQWdCLEtBQWE7WUFDM0IsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDckIsQ0FBQztRQU9NLG9DQUFZLEdBQW5CLFVBQW9CLFVBQWtCO1lBQ3BDLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDO1lBQzVCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQU9NLDZCQUFLLEdBQVosVUFBYSxFQUFVO1lBQ3JCLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO1lBQ2IsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBT00saUNBQVMsR0FBaEIsVUFBaUIsTUFBYztZQUM3QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUN2QixDQUFDO1FBT00sa0NBQVUsR0FBakIsVUFBa0IsT0FBNkI7WUFBN0Isd0JBQUEsRUFBQSxjQUE2QjtZQUM3QyxJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVEsRUFBRTtnQkFDL0IsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDOUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUNyQyxPQUFPO2lCQUNSO2dCQUNELElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQzdCLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7b0JBQzVDLE9BQU87aUJBQ1I7YUFDRjtpQkFBTSxJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVEsRUFBRTtnQkFDdEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7Z0JBQ3ZCLE9BQU87YUFDUjtZQUdELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLENBQUM7UUFLRCxzQkFBVyx3Q0FBYTtpQkFBeEI7Z0JBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ3RCLENBQUM7OztXQUFBO1FBT00sa0NBQVUsR0FBakIsVUFBa0IsT0FBZTtZQUMvQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixDQUFDO1FBT1ksK0JBQU8sR0FBcEIsVUFDRSxPQUEyQjs7O29CQUUzQixXQUFPLENBQUMsSUFBSSwyQkFBbUIsRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUM7OztTQUM3QztRQUNILG9CQUFDO0lBQUQsQ0FBQyxBQS9HRCxJQStHQztJQS9HWSxzQ0FBYSJ9