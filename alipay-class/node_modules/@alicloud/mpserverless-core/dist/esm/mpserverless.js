(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define(["require", "exports", "./utility"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var utility_1 = require("./utility");
    var MPServerlessCore = (function () {
        function MPServerlessCore(options) {
            utility_1.assert(options, 'options is required');
            utility_1.assert(options.spaceId, 'spaceId is required');
            utility_1.assert(options.endpoint, 'endpoint is required');
            this._debug = false;
            this._logger = options.logger || utility_1.emptyLogger;
            this.options = options;
            this.createTransport(options);
        }
        MPServerlessCore.prototype.setDebugFlag = function (flag) {
            this._debug = flag;
            this.transport.setLogger(this.logger);
        };
        Object.defineProperty(MPServerlessCore.prototype, "debug", {
            get: function () {
                return this._debug;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(MPServerlessCore.prototype, "logger", {
            get: function () {
                return this._debug ? this._logger : utility_1.emptyLogger;
            },
            enumerable: true,
            configurable: true
        });
        MPServerlessCore.prototype.createTransport = function (options) {
            var Klass = options.httpTransport;
            this.transport = new Klass(options.endpoint);
            this.transport.setAppId(options.appId);
            this.transport.setLogger(this.logger);
            this.transport.setSpaceId(options.spaceId);
            this.transport.setTimeout(options.timeout);
        };
        return MPServerlessCore;
    }());
    exports.MPServerlessCore = MPServerlessCore;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXBzZXJ2ZXJsZXNzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21wc2VydmVybGVzcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztJQUFBLHFDQUFnRDtJQUloRDtRQU1FLDBCQUFZLE9BQTRCO1lBQ3RDLGdCQUFNLENBQUMsT0FBTyxFQUFFLHFCQUFxQixDQUFDLENBQUM7WUFDdkMsZ0JBQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLHFCQUFxQixDQUFDLENBQUM7WUFDL0MsZ0JBQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLHNCQUFzQixDQUFDLENBQUM7WUFFakQsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsTUFBTSxJQUFJLHFCQUFXLENBQUM7WUFDN0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7WUFDdkIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBT00sdUNBQVksR0FBbkIsVUFBb0IsSUFBYTtZQUMvQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQU1ELHNCQUFXLG1DQUFLO2lCQUFoQjtnQkFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDckIsQ0FBQzs7O1dBQUE7UUFNRCxzQkFBVyxvQ0FBTTtpQkFBakI7Z0JBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxxQkFBVyxDQUFDO1lBQ2xELENBQUM7OztXQUFBO1FBS1MsMENBQWUsR0FBekIsVUFBMEIsT0FBNEI7WUFDcEQsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztZQUNwQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM3QyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDN0MsQ0FBQztRQUNILHVCQUFDO0lBQUQsQ0FBQyxBQXRERCxJQXNEQztJQXREWSw0Q0FBZ0IifQ==